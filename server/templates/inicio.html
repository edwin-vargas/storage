<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Upload Test</title>
</head>
<body>

    <h1>Upload File</h1>

    <!-- Form for file upload -->
    <form id="uploadForm">
        <label for="name">User Name:</label>
        <input type="text" id="name" name="name" required>
        <br><br>

        <label for="file">Choose a file to upload:</label>
        <input type="file" id="file" name="file" required>
        <br><br>

        <button type="submit">Upload File</button>
    </form>

    <p id="message"></p>

    <script>
        // Handle form submission
        document.getElementById('uploadForm').addEventListener('submit', function(event) {
            event.preventDefault();  // Prevent default form submission

            const name = document.getElementById('name').value;
            const fileInput = document.getElementById('file');
            const file = fileInput.files[0];  // Get the file from the input

            if (!name || !file) {
                document.getElementById('message').textContent = "Please provide both a name and a file.";
                return;
            }

            const formData = new FormData();
            formData.append("name", name);
            formData.append("file", file);

            // Send the file via fetch API
            fetch('http://localhost:3000/file', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Display the success message and file path
                if (data.filePath) {
                    document.getElementById('message').textContent = `File uploaded successfully! File saved at: ${data.filePath}`;
                } else {
                    document.getElementById('message').textContent = `Error: ${data.message || 'Something went wrong'}`;
                }
            })
            .catch(error => {
                document.getElementById('message').textContent = `Error: ${error.message}`;
            });
        });
    </script>

</body>
</html>
